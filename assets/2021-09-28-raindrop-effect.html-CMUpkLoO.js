import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,d as e,o as n}from"./app-CQ2TP62M.js";const t="/Blog/assets/202109/rainOnWindow.gif",h={};function l(k,i){return n(),a("div",null,i[0]||(i[0]=[e('<h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介"><span>简介</span></a></h2><p>本文介绍如何实现一个玻璃上雨滴落的特效</p><h2 id="效果与思路" tabindex="-1"><a class="header-anchor" href="#效果与思路"><span>效果与思路</span></a></h2><p>先看效果图吧</p><figure><img src="'+t+`" alt="RainOnWindow" tabindex="0" loading="lazy"><figcaption>RainOnWindow</figcaption></figure><p>这个其实是一种后期, 把 rain 的效果与当前帧相融合.<br> rain 的效果实施, 可以把整个屏幕分格, 一个格子中一个雨滴, 让并让他从下往下滑落.</p><h2 id="实现步骤简述" tabindex="-1"><a class="header-anchor" href="#实现步骤简述"><span>实现步骤简述</span></a></h2><ol><li>将整个 UV 分成小格子</li></ol><div class="language-glsl line-numbers-mode" data-highlighter="shiki" data-ext="glsl" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-glsl"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">vec2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cellUV </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> uv</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">gridsWH;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">cellUV </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> fract</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(cellUV);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>画一个雨滴</li></ol><div class="language-glsl line-numbers-mode" data-highlighter="shiki" data-ext="glsl" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-glsl"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">float</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> rDrop </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0.</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">rDrop </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> length</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(dropUV </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> gridSize);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>让雨滴往下滑掉</li></ol><div class="language-glsl line-numbers-mode" data-highlighter="shiki" data-ext="glsl" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-glsl"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">dropUV.y </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">+=</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> sin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(time </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">+</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> sin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">time </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">+</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> sin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">time</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0.5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)) </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0.4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="4"><li>画雨滴的尾</li></ol><div class="language-glsl line-numbers-mode" data-highlighter="shiki" data-ext="glsl" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-glsl"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">vec2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> trailUV </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cellUV </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> vec2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1.</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">8.</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">trailUV </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> fract</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(trailUV);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">trailUV </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">-=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0.5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">float</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> rTrail </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> length</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(trailUV </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> gridSize </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">/</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> vec2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1.</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 8.</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>修剪尾巴</li></ol><div class="language-glsl line-numbers-mode" data-highlighter="shiki" data-ext="glsl" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-glsl"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">rTrail </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> smoothstep</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.05</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.03</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, rTrail);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">rTrail </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">*=</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> smoothstep</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.01</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, dropUV.y);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">rTrail </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">*=</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> smoothstep</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, dropUV.y);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>最终将雨滴与每一帧合成</li></ol><div class="language-glsl line-numbers-mode" data-highlighter="shiki" data-ext="glsl" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-glsl"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">vec4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> texCol </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> texture</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">cc_gbuffer_albedoMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> v_uv </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> offsetUV</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="详细实现" tabindex="-1"><a class="header-anchor" href="#详细实现"><span>详细实现</span></a></h2><p><a href="https://github.com/hugohuang1111/fxcase/tree/master/assets/caseRaindrop" target="_blank" rel="noopener noreferrer">https://github.com/hugohuang1111/fxcase/tree/master/assets/caseRaindrop</a></p><hr><p>转自: <a href="http://www.hugohuang.xyz/" target="_blank" rel="noopener noreferrer">HH</a></p>`,23)]))}const d=s(h,[["render",l]]),g=JSON.parse('{"path":"/posts/2021-09-28-raindrop-effect.html","title":"雨滴特效","lang":"zh-CN","frontmatter":{"title":"雨滴特效","date":"2021-09-28T00:00:00.000Z","author":"hugo","tag":["effect"],"description":"简介 本文介绍如何实现一个玻璃上雨滴落的特效 效果与思路 先看效果图吧 RainOnWindowRainOnWindow 这个其实是一种后期, 把 rain 的效果与当前帧相融合. rain 的效果实施, 可以把整个屏幕分格, 一个格子中一个雨滴, 让并让他从下往下滑落. 实现步骤简述 将整个 UV 分成小格子 画一个雨滴 让雨滴往下滑掉 画雨滴的尾 ...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"雨滴特效\\",\\"image\\":[\\"https://mister-hope.github.io/Blog/assets/202109/rainOnWindow.gif\\"],\\"datePublished\\":\\"2021-09-28T00:00:00.000Z\\",\\"dateModified\\":\\"2025-06-21T17:07:42.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"hugo\\"}]}"],["meta",{"property":"og:url","content":"https://mister-hope.github.io/Blog/posts/2021-09-28-raindrop-effect.html"}],["meta",{"property":"og:site_name","content":"HH"}],["meta",{"property":"og:title","content":"雨滴特效"}],["meta",{"property":"og:description","content":"简介 本文介绍如何实现一个玻璃上雨滴落的特效 效果与思路 先看效果图吧 RainOnWindowRainOnWindow 这个其实是一种后期, 把 rain 的效果与当前帧相融合. rain 的效果实施, 可以把整个屏幕分格, 一个格子中一个雨滴, 让并让他从下往下滑落. 实现步骤简述 将整个 UV 分成小格子 画一个雨滴 让雨滴往下滑掉 画雨滴的尾 ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://mister-hope.github.io/Blog/assets/202109/rainOnWindow.gif"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-06-21T17:07:42.000Z"}],["meta",{"property":"article:author","content":"hugo"}],["meta",{"property":"article:tag","content":"effect"}],["meta",{"property":"article:published_time","content":"2021-09-28T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-06-21T17:07:42.000Z"}]]},"git":{"createdTime":1750525662000,"updatedTime":1750525662000,"contributors":[{"name":"hugo","username":"hugo","email":"hugohuang1111@gmail.com","commits":1,"url":"https://github.com/hugo"}]},"readingTime":{"minutes":0.79,"words":238},"filePathRelative":"posts/2021-09-28-raindrop-effect.md","excerpt":"<h2>简介</h2>\\n<p>本文介绍如何实现一个玻璃上雨滴落的特效</p>\\n<h2>效果与思路</h2>\\n<p>先看效果图吧</p>\\n<figure><img src=\\"/assets/202109/rainOnWindow.gif\\" alt=\\"RainOnWindow\\" tabindex=\\"0\\" loading=\\"lazy\\"><figcaption>RainOnWindow</figcaption></figure>\\n<p>这个其实是一种后期, 把 rain 的效果与当前帧相融合.<br>\\nrain 的效果实施, 可以把整个屏幕分格, 一个格子中一个雨滴, 让并让他从下往下滑落.</p>\\n","autoDesc":true}');export{d as comp,g as data};
