import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,d as r,o as n}from"./app-CQ2TP62M.js";const o={};function p(s,t){return n(),a("div",null,t[0]||(t[0]=[r('<h2 id="背景" tabindex="-1"><a class="header-anchor" href="#背景"><span>背景</span></a></h2><p>最近有一个需求, 根据一条线(实际是一系列的点集)生成一个长方体, 也就是本来显示线,就很简单了, 但是现在不要显示为线, 而是要显示为长条形的线, 也就是一个长的立方体, 这个立方体是可以任意弯曲, 有任意的形状.</p><h2 id="过程" tabindex="-1"><a class="header-anchor" href="#过程"><span>过程</span></a></h2><p>解决过程很曲折, 所以我想写下来,记念一下.</p><h3 id="try" tabindex="-1"><a class="header-anchor" href="#try"><span>Try</span></a></h3><p>我第一次是在每个点上做向外扩展四个点, 这四个点就是原始点 x,y 加减 w/2, h/2, 然后再把这些点组织成三角形.</p><p>结果:<br> 在 x, y 往外扩其实只有在线是在 z 方向上, 才可以,要是线在 x 方向, 明显就不行了</p><h3 id="try-try" tabindex="-1"><a class="header-anchor" href="#try-try"><span>Try Try</span></a></h3><p>吸取了上一次的教训, 我意识到, 点向外扩没有问题, 但是这个外扩其实是在原始点所在的平面来做的, 而这个平面与点所在的坐标系基本不会是一致的.</p><p>那么这个平面上的四个点, 应该怎么确定呢, 我找到以下几个已知条件,等式</p><ul><li>平面与法线垂直, 所以 P*N = 0, P 就是四个外扩点到原始点的的向量, N 可以用下一个点成当前点的向量的值</li><li>同时我们的这个长方体的截面是有固定大小的, 所以 pow(P, 2) = pow(w/2, 2) + pow(h/2, 2)</li><li>我们还可以把P 的y值直接固定下来</li></ul><p>有以上三个条件, 只有P是未知, P 是一个向量, 有三个值, 现在我们有三个等式, 那这个P应该是可以计算出来的.</p><p>事实的确可以计算出来. 后文我给出一个源码, 里面有一个 ExpandPoints_Useless 就是在做这个计算.</p><p>结果:<br> 这样计算出来的值, 不只有四个, 可能有8个, 这因为方程解出来求开方的结果有两个值, 需要自行再去判断, 同时方程计算中,还要考虑边界除0的问题.<br> 所以这样来计算还是不太好</p><h3 id="try-try-try" tabindex="-1"><a class="header-anchor" href="#try-try-try"><span>Try Try Try</span></a></h3><p>好了, 解方程理论上可行, 但是过程很复杂, 还有很多边界要处理. 在解决边界问题时, 我突然想到了, 平面与法线这两个元素, 平面上再取 x,y分量, 这不就是一个坐标系吗, 那么我可以在平面上直接取四个点, 然后再把平面旋转到原始点所在的坐标系的位置就可以了啊.</p><p>所以方法来了, 通过法线就可以知道, 两个坐标系之间的旋转矩阵, 平面上的四个点,就简单了,直接取值就好, 旋转后就是我们 Mesh 的顶点位置了.</p><p>这里有对应的实现</p><p><a href="https://github.com/hugohuang1111/ufxcase/blob/master/Assets/Scripts/DynamicLongCube.cs#L217" target="_blank" rel="noopener noreferrer">https://github.com/hugohuang1111/ufxcase/blob/master/Assets/Scripts/DynamicLongCube.cs#L217</a></p><h2 id="方案" tabindex="-1"><a class="header-anchor" href="#方案"><span>方案</span></a></h2><p>具体的实现可以看这里, 其中对于三角形面的处理也有介绍</p><p><a href="https://github.com/hugohuang1111/ufxcase/blob/master/Assets/Scripts/DynamicLongCube.cs" target="_blank" rel="noopener noreferrer">https://github.com/hugohuang1111/ufxcase/blob/master/Assets/Scripts/DynamicLongCube.cs</a></p><hr><p>转自: <a href="http://www.hugohuang.xyz/" target="_blank" rel="noopener noreferrer">HH</a></p>',24)]))}const c=e(o,[["render",p]]),l=JSON.parse('{"path":"/posts/2022-02-27-dynamic_long_cube.html","title":"动态生成长条立方体","lang":"zh-CN","frontmatter":{"title":"动态生成长条立方体","date":"2022-02-27T00:00:00.000Z","author":"hugo","tag":["unity"],"description":"背景 最近有一个需求, 根据一条线(实际是一系列的点集)生成一个长方体, 也就是本来显示线,就很简单了, 但是现在不要显示为线, 而是要显示为长条形的线, 也就是一个长的立方体, 这个立方体是可以任意弯曲, 有任意的形状. 过程 解决过程很曲折, 所以我想写下来,记念一下. Try 我第一次是在每个点上做向外扩展四个点, 这四个点就是原始点 x,y 加...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"动态生成长条立方体\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-02-27T00:00:00.000Z\\",\\"dateModified\\":\\"2025-06-21T17:07:42.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"hugo\\"}]}"],["meta",{"property":"og:url","content":"https://mister-hope.github.io/Blog/posts/2022-02-27-dynamic_long_cube.html"}],["meta",{"property":"og:site_name","content":"HH"}],["meta",{"property":"og:title","content":"动态生成长条立方体"}],["meta",{"property":"og:description","content":"背景 最近有一个需求, 根据一条线(实际是一系列的点集)生成一个长方体, 也就是本来显示线,就很简单了, 但是现在不要显示为线, 而是要显示为长条形的线, 也就是一个长的立方体, 这个立方体是可以任意弯曲, 有任意的形状. 过程 解决过程很曲折, 所以我想写下来,记念一下. Try 我第一次是在每个点上做向外扩展四个点, 这四个点就是原始点 x,y 加..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-06-21T17:07:42.000Z"}],["meta",{"property":"article:author","content":"hugo"}],["meta",{"property":"article:tag","content":"unity"}],["meta",{"property":"article:published_time","content":"2022-02-27T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-06-21T17:07:42.000Z"}]]},"git":{"createdTime":1750525662000,"updatedTime":1750525662000,"contributors":[{"name":"hugo","username":"hugo","email":"hugohuang1111@gmail.com","commits":1,"url":"https://github.com/hugo"}]},"readingTime":{"minutes":2.61,"words":783},"filePathRelative":"posts/2022-02-27-dynamic_long_cube.md","excerpt":"<h2>背景</h2>\\n<p>最近有一个需求, 根据一条线(实际是一系列的点集)生成一个长方体, 也就是本来显示线,就很简单了, 但是现在不要显示为线, 而是要显示为长条形的线, 也就是一个长的立方体, 这个立方体是可以任意弯曲, 有任意的形状.</p>\\n<h2>过程</h2>\\n<p>解决过程很曲折, 所以我想写下来,记念一下.</p>\\n<h3>Try</h3>\\n<p>我第一次是在每个点上做向外扩展四个点, 这四个点就是原始点 x,y 加减 w/2, h/2, 然后再把这些点组织成三角形.</p>\\n<p>结果:<br>\\n在 x, y 往外扩其实只有在线是在 z 方向上, 才可以,要是线在 x 方向, 明显就不行了</p>","autoDesc":true}');export{c as comp,l as data};
